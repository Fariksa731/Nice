<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
  <style>
    input, button { margin: 5px; padding: 8px; }
    table { border-collapse: collapse; margin-top: 20px; width: 100%; }
    td, th { border: 1px solid #ccc; padding: 8px; }
  </style>
</head>
<body>
  <h1>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h1>
  <input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬" />
  <input id="description" placeholder="Ø§Ù„ÙˆØµÙ" />
  <input id="price" placeholder="Ø§Ù„Ø³Ø¹Ø±" />
  <input id="image" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©" />
  <button onclick="addProduct()">Ø¥Ø¶Ø§ÙØ©</button>

  <table id="productTable">
    <thead><tr><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„ÙˆØµÙ</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>ØµÙˆØ±Ø©</th><th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th></tr></thead>
    <tbody></tbody>
  </table>

  <script>
    async function fetchProducts() {
      const res = await fetch("/.netlify/functions/getProducts");
      const products = await res.json();
      const tbody = document.querySelector("tbody");
      tbody.innerHTML = "";
      products.forEach(p => {
        tbody.innerHTML += `
          <tr>
            <td>${p.name}</td><td>${p.description}</td><td>${p.price}</td>
            <td><img src="${p.image}" width="50"/></td>
            <td>
              <button onclick='deleteProduct("${p._id}")'>ğŸ—‘ Ø­Ø°Ù</button>
              <button onclick='editProduct("${p._id}")'>âœ ØªØ¹Ø¯ÙŠÙ„</button>
            </td>
          </tr>`;
      });
    }

async function addProduct() {
  const data = {
    name: name.value,
    description: description.value,
    price: price.value,
    image: image.value
  };
  await fetch("/.netlify/functions/addProduct", {
    method: "POST",
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data)
  });
  fetchProducts();
}

async function deleteProduct(id) {
  await fetch("/.netlify/functions/deleteProduct", {
    method: "POST",
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ id })
  });
  fetchProducts();
}

async function editProduct(id) {
  const name = prompt("Ø§Ø³Ù… Ø¬Ø¯ÙŠØ¯");
  const description = prompt("ÙˆØµÙ Ø¬Ø¯ÙŠØ¯");
  const price = prompt("Ø³Ø¹Ø± Ø¬Ø¯ÙŠØ¯");
  const image = prompt("Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯");

  await fetch("/.netlify/functions/updateProduct", {
    method: "POST",
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ id, name, description, price, image })
  });
  fetchProducts();
}

  </script>
</body>
</html>
